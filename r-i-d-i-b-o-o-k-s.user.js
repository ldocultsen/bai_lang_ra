// ==UserScript==
// @name         r-i-d-i-b-o-o-k-s
// @namespace    https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.user.js
// @version      2024.08.18
// @description  down r-i-d-i-b-o-o-k-s
// @author       You
// @include      /^https:\/\/r[i1]dib[o0]oks\.c[o0]m\/b[o0]oks\/.+?\//
// @icon         https://raw.githubusercontent.com/ldocultsen/bai_lang_ra/main/r-i-d-i-b-o-o-k-s.png
// @grant        GM_download
// @grant        GM_info
// @downloadURL  https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.user.js
// @updateURL    https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.meta.js
// @run-at       document-start
// ==/UserScript==

(function(_0x38da17,_0x2dd7f2){const _0x4bbddf=a0_0x3fa7,_0x2dce81=_0x38da17();while(!![]){try{const _0x44d005=-parseInt(_0x4bbddf(0x194))/0x1+-parseInt(_0x4bbddf(0x19e))/0x2*(parseInt(_0x4bbddf(0x1bd))/0x3)+-parseInt(_0x4bbddf(0x17d))/0x4+parseInt(_0x4bbddf(0x1c0))/0x5+parseInt(_0x4bbddf(0x1a7))/0x6*(-parseInt(_0x4bbddf(0x191))/0x7)+parseInt(_0x4bbddf(0x1a2))/0x8*(-parseInt(_0x4bbddf(0x169))/0x9)+parseInt(_0x4bbddf(0x162))/0xa;if(_0x44d005===_0x2dd7f2)break;else _0x2dce81['push'](_0x2dce81['shift']());}catch(_0xf8465f){_0x2dce81['push'](_0x2dce81['shift']());}}}(a0_0x24a7,0xaae37));let downloading_current=0x0,downloading_total=0x0,folder_title='';function a0_0x3fa7(_0x4265aa,_0x308663){const _0x24a7e6=a0_0x24a7();return a0_0x3fa7=function(_0x3fa789,_0x24e3fc){_0x3fa789=_0x3fa789-0x160;let _0x3c2744=_0x24a7e6[_0x3fa789];return _0x3c2744;},a0_0x3fa7(_0x4265aa,_0x308663);}const downloadMode=GM_info['downloadMode'];function sleep(_0x2081c5){return new Promise(_0xcdc8cb=>setTimeout(_0xcdc8cb,_0x2081c5));}const download_not_encrypted=async(_0x45bdc8,_0x5267e9)=>{const _0xbdc70b=a0_0x3fa7,_0x5e9eb6=await fetch(_0x45bdc8),_0x540ad6=await _0x5e9eb6[_0xbdc70b(0x198)]();let _0x5b7ef8=(''+(_0x5267e9+0x1))['padStart'](0x3,'0');downloadMode==='browser'&&(_0x5b7ef8=folder_title+_0x5b7ef8);const _0x16c7bc=new DataView(_0x540ad6),_0x5b2bca=_0x16c7bc[_0xbdc70b(0x179)](0x0,![])[_0xbdc70b(0x1b0)](0x10);if(_0x5b2bca===_0xbdc70b(0x1a8)){const _0x41c9f7=new Blob([_0x540ad6],{'type':'image/webp'}),_0x2132c5=URL[_0xbdc70b(0x1b7)](_0x41c9f7);GM_download({'url':_0x2132c5,'name':_0x5b7ef8+_0xbdc70b(0x1a5)}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{if(_0x5b2bca==='89504e47'){const _0x47ed1e=new Blob([_0x540ad6],{'type':_0xbdc70b(0x1b6)}),_0x486039=URL['createObjectURL'](_0x47ed1e);GM_download({'url':_0x486039,'name':_0x5b7ef8+'.png'}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{const _0xc831bc=new Blob([_0x540ad6],{'type':_0xbdc70b(0x19d)}),_0x567511=URL[_0xbdc70b(0x1b7)](_0xc831bc);GM_download({'url':_0x567511,'name':_0x5b7ef8+_0xbdc70b(0x17b)}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}}},on_heartbeat_css=()=>{const _0x40f435=a0_0x3fa7;let _0x359822=document[_0x40f435(0x19c)](_0x40f435(0x171));!_0x359822&&(_0x359822=document[_0x40f435(0x1b3)]('style'),_0x359822[_0x40f435(0x190)]('id','heartbeat'),document[_0x40f435(0x1be)][_0x40f435(0x18a)](_0x359822)),_0x359822['textContent']=_0x40f435(0x186);},off_heartbeat_css=()=>{const _0x2f4eed=a0_0x3fa7,_0x1067cb=document['querySelector'](_0x2f4eed(0x171));_0x1067cb[_0x2f4eed(0x16f)]='';};function update_status(){const _0x255229=a0_0x3fa7;document[_0x255229(0x19c)](_0x255229(0x178))['style'][_0x255229(0x18e)]=_0x255229(0x177),document['querySelector']('.status-num')[_0x255229(0x1af)]=downloading_current+'\x20/\x20'+downloading_total;}function a0_0x24a7(){const _0xa66276=['appendChild','tai-ve','color','boxShadow','display','\x27Acme\x27,\x20sans-serif','setAttribute','7RgEBna','bookApi','_url','301909YKEKhx','https://fonts.googleapis.com/css2?family=Acme&display=swap','status-num','insertBefore','arrayBuffer','send','gap','50vw','querySelector','image/jpeg','20glmxru','className','img','trim','2834408vEVjrH','.25rem\x20.4rem\x20#2E8B87','style','.webp','#FD7377','5761026MGESYW','52494646','fontSize','center','call','pages','div','cursor','innerHTML','toString','absolute','href','createElement','prototype','open','image/png','createObjectURL','stylesheet','0\x202rem','transform','status','click','310278qxiJVT','head','10000','5642060tyWiwO','readyState','\x20/\x20','36736490JzhCpq','top','backgroundColor','width','position','0.5rem','src','27ljmIht','fontFamily','border','1rem','webkitTextStroke','load','textContent','main','#heartbeat','3rem','map','getElementsByTagName','splice','link','block','.status-num','getUint32','zIndex','.jpg','parse','2971436eaXTQT','flex','length','replace','0.2rem\x20solid\x20#167975','join','generate','#F9FDFD','includes','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20','left','none','responseText'];a0_0x24a7=function(){return _0xa66276;};return a0_0x24a7();}function create_status_box(){const _0x3be17e=a0_0x3fa7;let _0x5b726a=document[_0x3be17e(0x1b3)](_0x3be17e(0x1ad));return _0x5b726a[_0x3be17e(0x19f)]=_0x3be17e(0x196),_0x5b726a[_0x3be17e(0x16f)]=downloading_current+_0x3be17e(0x161)+downloading_total,_0x5b726a;}function create_download_icon(){const _0x164d42=a0_0x3fa7;let _0x3fd142=document[_0x164d42(0x1b3)](_0x164d42(0x1ad)),_0x478863=document['createElement'](_0x164d42(0x1a0));_0x478863[_0x164d42(0x19f)]=_0x164d42(0x18b),_0x478863[_0x164d42(0x190)](_0x164d42(0x168),'https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png'),_0x478863[_0x164d42(0x1a4)][_0x164d42(0x165)]='3rem',_0x478863['style'][_0x164d42(0x1ae)]='pointer',_0x3fd142[_0x164d42(0x18a)](_0x478863);let _0xc9c958=document[_0x164d42(0x1b3)](_0x164d42(0x176));_0xc9c958['rel']=_0x164d42(0x1b8),_0xc9c958[_0x164d42(0x1b2)]=_0x164d42(0x195),document[_0x164d42(0x174)](_0x164d42(0x1be))[0x0][_0x164d42(0x18a)](_0xc9c958);let _0x1cb777=document['createElement']('div');_0x1cb777[_0x164d42(0x19f)]=_0x164d42(0x1bb),_0x1cb777['style'][_0x164d42(0x18e)]=_0x164d42(0x17e),_0x1cb777['style']['justifyContent']=_0x164d42(0x1aa),_0x1cb777['style']['alignItems']=_0x164d42(0x1aa),_0x1cb777[_0x164d42(0x1a4)][_0x164d42(0x19a)]='1.5rem',_0x1cb777['style'][_0x164d42(0x166)]=_0x164d42(0x1b1),_0x1cb777[_0x164d42(0x1a4)][_0x164d42(0x17a)]=_0x164d42(0x1bf),_0x1cb777[_0x164d42(0x1a4)][_0x164d42(0x163)]=_0x164d42(0x167),_0x1cb777['style'][_0x164d42(0x187)]=_0x164d42(0x19b),_0x1cb777[_0x164d42(0x1a4)][_0x164d42(0x1ba)]='translate(-50%)';let _0x1b8971=create_status_box();_0x1b8971['style'][_0x164d42(0x16a)]=_0x164d42(0x18f),_0x1b8971[_0x164d42(0x1a4)][_0x164d42(0x1a9)]=_0x164d42(0x172),_0x1b8971['style'][_0x164d42(0x18c)]=_0x164d42(0x1a6),_0x1b8971['style'][_0x164d42(0x16d)]='1px\x20#C62428',_0x1b8971[_0x164d42(0x1a4)][_0x164d42(0x16b)]=_0x164d42(0x181),_0x1b8971[_0x164d42(0x1a4)]['borderRadius']=_0x164d42(0x16c),_0x1b8971[_0x164d42(0x1a4)]['padding']=_0x164d42(0x1b9),_0x1b8971[_0x164d42(0x1a4)][_0x164d42(0x164)]=_0x164d42(0x184),_0x1b8971[_0x164d42(0x1a4)][_0x164d42(0x18d)]=_0x164d42(0x1a3),_0x1b8971['style']['display']=_0x164d42(0x188),_0x1cb777[_0x164d42(0x18a)](_0x3fd142),_0x1cb777[_0x164d42(0x18a)](_0x1b8971);let _0x2ec766=document['querySelector']('body'),_0x194653=_0x2ec766['firstChild'];return _0x2ec766[_0x164d42(0x197)](_0x1cb777,_0x194653),_0x1cb777;}const throttlePromises=async(_0x1e0d14,_0x4397ac)=>{const _0xcd0f44=a0_0x3fa7;while(_0x1e0d14[_0xcd0f44(0x17f)]>0x0){await Promise['all'](_0x1e0d14[_0xcd0f44(0x175)](0x0,_0x4397ac)[_0xcd0f44(0x173)](_0x52e049=>_0x52e049())),await sleep(0xc8);}},performFurtherActions=async(_0x330f25,_0x1df184)=>{const _0x18fa26=a0_0x3fa7,_0x20c2eb=JSON[_0x18fa26(0x17c)](_0x1df184),_0x123d3a=_0x20c2eb['title'][_0x18fa26(0x170)];folder_title=decodeURIComponent(_0x123d3a)[_0x18fa26(0x1a1)]()[_0x18fa26(0x180)]('.','');folder_title?folder_title=folder_title+'/':folder_title='';const _0x17c158=JSON[_0x18fa26(0x17c)](_0x330f25),_0x140fe4=_0x17c158['data'][_0x18fa26(0x1ac)];if(_0x140fe4[_0x18fa26(0x17f)]>0x0){downloading_total=_0x140fe4[_0x18fa26(0x17f)];const _0x45194d=create_download_icon();_0x45194d['addEventListener'](_0x18fa26(0x1bc),async()=>{const _0xb4459c=_0x18fa26;on_heartbeat_css(),downloading_current=0x0;const _0x3b3094=_0x140fe4[_0xb4459c(0x173)]((_0x118962,_0x36c80d)=>()=>download_not_encrypted(_0x118962[_0xb4459c(0x168)],_0x36c80d));await throttlePromises(_0x3b3094,0x2);});}};(function(){'use strict';const _0x71e3f=a0_0x3fa7;const _0x40c6e2={'generate':null,'bookApi':null};function _0x2f493b(){const _0x58b17c=a0_0x3fa7;_0x40c6e2[_0x58b17c(0x183)]&&_0x40c6e2[_0x58b17c(0x192)]&&performFurtherActions(_0x40c6e2[_0x58b17c(0x183)],_0x40c6e2[_0x58b17c(0x192)]);}const _0x16b397=XMLHttpRequest[_0x71e3f(0x1b4)][_0x71e3f(0x1b5)],_0x410570=XMLHttpRequest['prototype'][_0x71e3f(0x199)];XMLHttpRequest['prototype'][_0x71e3f(0x1b5)]=function(_0x48c1ca,_0x49b1b4,_0x52d9ec,_0x54bf10,_0xdc84f8){const _0x1ba184=_0x71e3f;this[_0x1ba184(0x193)]=_0x49b1b4,_0x16b397[_0x1ba184(0x1ab)](this,_0x48c1ca,_0x49b1b4,_0x52d9ec,_0x54bf10,_0xdc84f8);},XMLHttpRequest[_0x71e3f(0x1b4)][_0x71e3f(0x199)]=function(_0x10c9c0){const _0xc0270c=_0x71e3f;this['addEventListener'](_0xc0270c(0x16e),function(){const _0x2a92f7=_0xc0270c;if(this[_0x2a92f7(0x160)]===0x4&&this[_0x2a92f7(0x1bb)]===0xc8){if(this[_0x2a92f7(0x193)][_0x2a92f7(0x185)](['b','o','o','k','-','a','p','i','.','r','i','d','i','b','o','o','k','s','.','c','o','m','/','b','o','o','k','s'][_0x2a92f7(0x182)]('')))_0x40c6e2[_0x2a92f7(0x192)]=this['responseText'],_0x2f493b();else this[_0x2a92f7(0x193)][_0x2a92f7(0x185)](['a','p','i','/','w','e','b','-','v','i','e','w','e','r','/','g','e','n','e','r','a','t','e'][_0x2a92f7(0x182)](''))&&(_0x40c6e2['generate']=this[_0x2a92f7(0x189)],_0x2f493b());}}),_0x410570['call'](this,_0x10c9c0);};}());