// ==UserScript==
// @name         r-i-d-i-b-o-o-k-s
// @namespace    https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.user.js
// @version      2024.08.14
// @description  down r-i-d-i-b-o-o-k-s
// @author       You
// @include      /^https:\/\/r[i1]dib[o0]oks.c[o0]m\/b[o0]oks\/.+?\/vi[e3]w.+/
// @icon         https://raw.githubusercontent.com/ldocultsen/bai_lang_ra/main/r-i-d-i-b-o-o-k-s.png
// @grant        GM_download
// @grant        GM_info
// @downloadURL  https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.user.js
// @updateURL    https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.meta.js
// @run-at       document-start
// ==/UserScript==

(function(_0x203cbc,_0x47fcfd){const _0x2566a2=a0_0x2c4a,_0x11a834=_0x203cbc();while(!![]){try{const _0x30293f=parseInt(_0x2566a2(0xf8))/0x1+-parseInt(_0x2566a2(0xd7))/0x2*(parseInt(_0x2566a2(0xee))/0x3)+-parseInt(_0x2566a2(0xc9))/0x4+-parseInt(_0x2566a2(0xf3))/0x5*(parseInt(_0x2566a2(0xc3))/0x6)+parseInt(_0x2566a2(0xe1))/0x7+-parseInt(_0x2566a2(0xea))/0x8*(parseInt(_0x2566a2(0xbe))/0x9)+-parseInt(_0x2566a2(0xbf))/0xa*(-parseInt(_0x2566a2(0x109))/0xb);if(_0x30293f===_0x47fcfd)break;else _0x11a834['push'](_0x11a834['shift']());}catch(_0x30b5e5){_0x11a834['push'](_0x11a834['shift']());}}}(a0_0x43d0,0x50923));let downloading_current=0x0,downloading_total=0x0,folder_title='';const downloadMode=GM_info['downloadMode'];function a0_0x2c4a(_0x54775a,_0x3ad9fd){const _0x43d0ed=a0_0x43d0();return a0_0x2c4a=function(_0x2c4a39,_0x37622e){_0x2c4a39=_0x2c4a39-0xa4;let _0xf776bd=_0x43d0ed[_0x2c4a39];return _0xf776bd;},a0_0x2c4a(_0x54775a,_0x3ad9fd);}function sleep(_0x42c9e4){return new Promise(_0x14c2f8=>setTimeout(_0x14c2f8,_0x42c9e4));}const download_not_encrypted=async(_0x102540,_0x22919a,_0x500574)=>{const _0x403f8c=a0_0x2c4a,_0x1704b6=await fetch(_0x102540),_0x4140b7=await _0x1704b6[_0x403f8c(0xbb)]();let _0x4302cd=(''+(_0x22919a+0x1))[_0x403f8c(0xae)](0x3,'0');downloadMode==='browser'&&(_0x4302cd=folder_title+_0x4302cd);const _0x4eca6b=new DataView(_0x4140b7),_0x2f7f5d=_0x4eca6b[_0x403f8c(0xb8)](0x0,![])[_0x403f8c(0xa5)](0x10);if(_0x2f7f5d==='52494646'){const _0x7e5b8e=new Blob([_0x4140b7],{'type':_0x403f8c(0xd3)}),_0x3eec4a=URL[_0x403f8c(0xf7)](_0x7e5b8e);GM_download({'url':_0x3eec4a,'name':_0x4302cd+_0x403f8c(0xf1)}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{if(_0x2f7f5d===_0x403f8c(0xdf)){const _0xb528c5=new Blob([_0x4140b7],{'type':_0x403f8c(0xfe)}),_0x40a35e=URL[_0x403f8c(0xf7)](_0xb528c5);GM_download({'url':_0x40a35e,'name':_0x4302cd+_0x403f8c(0xdd)}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{const _0x5c3cef=new Blob([_0x4140b7],{'type':'image/jpeg'}),_0x7c92e4=URL['createObjectURL'](_0x5c3cef);GM_download({'url':_0x7c92e4,'name':_0x4302cd+_0x403f8c(0xf9)}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}}},on_heartbeat_css=()=>{const _0x60d16e=a0_0x2c4a;let _0x5a7a1e=document[_0x60d16e(0xfc)](_0x60d16e(0x104));!_0x5a7a1e&&(_0x5a7a1e=document[_0x60d16e(0xaa)](_0x60d16e(0xce)),_0x5a7a1e[_0x60d16e(0xde)]('id',_0x60d16e(0xa7)),document[_0x60d16e(0xe2)][_0x60d16e(0xc6)](_0x5a7a1e)),_0x5a7a1e[_0x60d16e(0xf6)]='\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20';},off_heartbeat_css=()=>{const _0x3c5e3e=a0_0x2c4a,_0x581b2e=document[_0x3c5e3e(0xfc)](_0x3c5e3e(0x104));_0x581b2e[_0x3c5e3e(0xf6)]='';};function update_status(){const _0x487452=a0_0x2c4a;document[_0x487452(0xfc)](_0x487452(0xa6))['style'][_0x487452(0xb5)]='block',document[_0x487452(0xfc)](_0x487452(0xa6))[_0x487452(0xf5)]=downloading_current+_0x487452(0xb4)+downloading_total;}function create_status_box(){const _0x260bf4=a0_0x2c4a;let _0x3efc25=document[_0x260bf4(0xaa)](_0x260bf4(0x100));return _0x3efc25[_0x260bf4(0xc8)]=_0x260bf4(0xfa),_0x3efc25[_0x260bf4(0xf6)]=downloading_current+_0x260bf4(0xb4)+downloading_total,_0x3efc25;}function create_download_icon(){const _0x64610d=a0_0x2c4a;let _0x345969=document[_0x64610d(0xaa)](_0x64610d(0x100)),_0x45f910=document[_0x64610d(0xaa)](_0x64610d(0xab));_0x45f910[_0x64610d(0xc8)]=_0x64610d(0xfb),_0x45f910['setAttribute']('src',_0x64610d(0x108)),_0x45f910['style'][_0x64610d(0xed)]=_0x64610d(0xc4),_0x45f910['style']['cursor']=_0x64610d(0xf4),_0x345969[_0x64610d(0xc6)](_0x45f910);let _0x830790=document['createElement'](_0x64610d(0xb6));_0x830790[_0x64610d(0xa9)]=_0x64610d(0xcd),_0x830790[_0x64610d(0xdb)]=_0x64610d(0xd2),document[_0x64610d(0xe0)](_0x64610d(0xe2))[0x0][_0x64610d(0xc6)](_0x830790);let _0x3ec468=document[_0x64610d(0xaa)](_0x64610d(0x100));_0x3ec468[_0x64610d(0xc8)]=_0x64610d(0x102),_0x3ec468['style'][_0x64610d(0xb5)]=_0x64610d(0xd1),_0x3ec468[_0x64610d(0xce)][_0x64610d(0xe8)]=_0x64610d(0xd6),_0x3ec468['style'][_0x64610d(0xaf)]=_0x64610d(0xd6),_0x3ec468[_0x64610d(0xce)][_0x64610d(0xc2)]='1.5rem',_0x3ec468['style'][_0x64610d(0xb3)]=_0x64610d(0xfd),_0x3ec468['style'][_0x64610d(0xcb)]='10000',_0x3ec468['style'][_0x64610d(0xcf)]='0.5rem',_0x3ec468['style'][_0x64610d(0xd8)]=_0x64610d(0xe9),_0x3ec468[_0x64610d(0xce)][_0x64610d(0xe6)]=_0x64610d(0x103);let _0x385429=create_status_box();_0x385429[_0x64610d(0xce)]['fontFamily']=_0x64610d(0x107),_0x385429[_0x64610d(0xce)]['fontSize']=_0x64610d(0xc4),_0x385429[_0x64610d(0xce)][_0x64610d(0xd5)]=_0x64610d(0x106),_0x385429['style']['webkitTextStroke']=_0x64610d(0xda),_0x385429[_0x64610d(0xce)][_0x64610d(0xef)]=_0x64610d(0xb7),_0x385429['style']['borderRadius']=_0x64610d(0xb2),_0x385429[_0x64610d(0xce)][_0x64610d(0x105)]=_0x64610d(0xf0),_0x385429[_0x64610d(0xce)][_0x64610d(0xca)]=_0x64610d(0xb0),_0x385429[_0x64610d(0xce)]['boxShadow']=_0x64610d(0xf2),_0x385429[_0x64610d(0xce)]['display']=_0x64610d(0xe3),_0x3ec468[_0x64610d(0xc6)](_0x345969),_0x3ec468[_0x64610d(0xc6)](_0x385429);let _0x23d428=document[_0x64610d(0xfc)](_0x64610d(0xec)),_0x2ce7a4=_0x23d428[_0x64610d(0xc0)];return _0x23d428[_0x64610d(0xc7)](_0x3ec468,_0x2ce7a4),_0x3ec468;}const throttlePromises=async(_0x2ca37e,_0x416b8d)=>{const _0x273d7f=a0_0x2c4a;while(_0x2ca37e['length']>0x0){await Promise[_0x273d7f(0xba)](_0x2ca37e[_0x273d7f(0xac)](0x0,_0x416b8d)[_0x273d7f(0xeb)](_0x555c35=>_0x555c35())),await sleep(0xc8);}},get_data_need=_0x8a2fde=>{return new Promise((_0x73d1ec,_0x536bf1)=>{const _0x33b3f3=a0_0x2c4a;var _0x49b180=XMLHttpRequest[_0x33b3f3(0xc1)][_0x33b3f3(0xc5)];XMLHttpRequest['prototype']['open']=function(_0x4dfe6d,_0x2a3a0d,_0x106b94,_0x2740a8,_0xc9d44c){const _0x2228b0=_0x33b3f3;return this[_0x2228b0(0xd0)]=_0x2a3a0d,_0x49b180[_0x2228b0(0x101)](this,arguments);};var _0x40b654=XMLHttpRequest['prototype'][_0x33b3f3(0xad)];XMLHttpRequest[_0x33b3f3(0xc1)][_0x33b3f3(0xad)]=function(_0x20c15d){const _0x2ba274=_0x33b3f3;return this[_0x2ba274(0xa4)](_0x2ba274(0xa8),function(){const _0x469786=_0x2ba274;if(this[_0x469786(0xd0)][_0x469786(0xd4)](_0x8a2fde)){if(this[_0x469786(0xd0)][_0x469786(0xd4)](['a','p','i','/','w','e','b','-','v','i','e','w','e','r','/','g','e','n','e','r','a','t','e'][_0x469786(0xe4)](''))){const _0xfbd553=JSON[_0x469786(0xbd)](this[_0x469786(0xb9)]);_0x73d1ec(_0xfbd553[_0x469786(0xe5)][_0x469786(0xb1)]);}else{if(this[_0x469786(0xd0)][_0x469786(0xd4)](['b','o','o','k','-','a','p','i','.','r','i','d','i','b','o','o','k','s','.','c','o','m','/','b','o','o','k','s'][_0x469786(0xe4)](''))){const _0x2758ca=JSON[_0x469786(0xbd)](this[_0x469786(0xb9)]);_0x73d1ec(_0x2758ca[_0x469786(0xcc)][_0x469786(0xd9)]);}}_0x73d1ec(this[_0x469786(0xb9)]);}}),_0x40b654['apply'](this,arguments);};});};function a0_0x43d0(){const _0x307fbd=['transform','length','justifyContent','50vw','8OxmdDD','map','body','width','58161kyYVgD','border','0\x202rem','.webp','.25rem\x20.4rem\x20#2E8B87','95570UpfLqW','pointer','innerHTML','textContent','createObjectURL','303429KonIFh','.jpg','status-num','tai-ve','querySelector','absolute','image/png','trim','div','apply','status','translate(-50%)','#heartbeat','padding','#FD7377','\x27Acme\x27,\x20sans-serif','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','242033jubAVV','addEventListener','toString','.status-num','heartbeat','load','rel','createElement','img','splice','send','padStart','alignItems','#F9FDFD','pages','1rem','position','\x20/\x20','display','link','0.2rem\x20solid\x20#167975','getUint32','responseText','all','arrayBuffer','click','parse','4990572aDeLHD','380pKwQIL','firstChild','prototype','gap','84xvOVOS','3rem','open','appendChild','insertBefore','className','1666068joDPHe','backgroundColor','zIndex','title','stylesheet','style','top','_url','flex','https://fonts.googleapis.com/css2?family=Acme&display=swap','image/webp','includes','color','center','14huIVAZ','left','main','1px\x20#C62428','href','src','.png','setAttribute','89504e47','getElementsByTagName','3953642rvKiCm','head','none','join','data'];a0_0x43d0=function(){return _0x307fbd;};return a0_0x43d0();}((async()=>{'use strict';const _0x10f9f9=a0_0x2c4a;const _0x519e4f=await get_data_need(['b','o','o','k','-','a','p','i','.','r','i','d','i','b','o','o','k','s','.','c','o','m','/','b','o','o','k','s'][_0x10f9f9(0xe4)](''));folder_title=decodeURIComponent(_0x519e4f)[_0x10f9f9(0xff)]()['replace']('.','');folder_title?folder_title=folder_title+'/':folder_title='';const _0x2ad7be=await get_data_need(['a','p','i','/','w','e','b','-','v','i','e','w','e','r','/','g','e','n','e','r','a','t','e']['join'](''));if(_0x2ad7be['length']>0x0){downloading_total=_0x2ad7be[_0x10f9f9(0xe7)];const _0xdf3791=create_download_icon();_0xdf3791[_0x10f9f9(0xa4)](_0x10f9f9(0xbc),async()=>{const _0x37af30=_0x10f9f9;on_heartbeat_css(),downloading_current=0x0;const _0x303677=_0x2ad7be['map']((_0xf02284,_0x3d58c3)=>()=>download_not_encrypted(_0xf02284[_0x37af30(0xdc)],_0x3d58c3));await throttlePromises(_0x303677,0x2);});}})());