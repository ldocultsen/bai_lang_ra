// ==UserScript==
// @name         r-i-d-i-b-o-o-k-s
// @namespace    https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.user.js
// @version      2024.08.15
// @description  down r-i-d-i-b-o-o-k-s
// @author       You
// @include      /^https:\/\/r[i1]dib[o0]oks.c[o0]m\/b[o0]oks\/.+?\//
// @icon         https://raw.githubusercontent.com/ldocultsen/bai_lang_ra/main/r-i-d-i-b-o-o-k-s.png
// @grant        GM_download
// @grant        GM_info
// @downloadURL  https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.user.js
// @updateURL    https://github.com/ldocultsen/bai_lang_ra/raw/main/r-i-d-i-b-o-o-k-s.meta.js
// @run-at       document-start
// ==/UserScript==

const a0_0x12c87f=a0_0x1199;(function(_0x72f13b,_0x149124){const _0x871cff=a0_0x1199,_0xc0ef2b=_0x72f13b();while(!![]){try{const _0x196699=-parseInt(_0x871cff(0x141))/0x1+-parseInt(_0x871cff(0x167))/0x2+-parseInt(_0x871cff(0x182))/0x3*(-parseInt(_0x871cff(0x16a))/0x4)+-parseInt(_0x871cff(0x192))/0x5+parseInt(_0x871cff(0x154))/0x6+parseInt(_0x871cff(0x163))/0x7*(-parseInt(_0x871cff(0x17d))/0x8)+parseInt(_0x871cff(0x156))/0x9;if(_0x196699===_0x149124)break;else _0xc0ef2b['push'](_0xc0ef2b['shift']());}catch(_0x590445){_0xc0ef2b['push'](_0xc0ef2b['shift']());}}}(a0_0xe8ef,0x92162));let downloading_current=0x0,downloading_total=0x0,folder_title='';const downloadMode=GM_info[a0_0x12c87f(0x16d)];function sleep(_0x486acc){return new Promise(_0x13ea5d=>setTimeout(_0x13ea5d,_0x486acc));}const download_not_encrypted=async(_0x2bc432,_0x273786,_0x553216)=>{const _0x17f495=a0_0x12c87f,_0x8b626f=await fetch(_0x2bc432),_0x4e0ce5=await _0x8b626f[_0x17f495(0x181)]();let _0x1db3d9=(''+(_0x273786+0x1))[_0x17f495(0x165)](0x3,'0');downloadMode===_0x17f495(0x158)&&(_0x1db3d9=folder_title+_0x1db3d9);const _0x509f34=new DataView(_0x4e0ce5),_0x9f3e77=_0x509f34['getUint32'](0x0,![])[_0x17f495(0x186)](0x10);if(_0x9f3e77===_0x17f495(0x13d)){const _0x2a99e7=new Blob([_0x4e0ce5],{'type':_0x17f495(0x159)}),_0x426ba7=URL['createObjectURL'](_0x2a99e7);GM_download({'url':_0x426ba7,'name':_0x1db3d9+_0x17f495(0x17a)}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{if(_0x9f3e77==='89504e47'){const _0x3b18c0=new Blob([_0x4e0ce5],{'type':_0x17f495(0x14b)}),_0x34c467=URL[_0x17f495(0x185)](_0x3b18c0);GM_download({'url':_0x34c467,'name':_0x1db3d9+'.png'}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{const _0x77ef4a=new Blob([_0x4e0ce5],{'type':_0x17f495(0x19b)}),_0x528964=URL[_0x17f495(0x185)](_0x77ef4a);GM_download({'url':_0x528964,'name':_0x1db3d9+'.jpg'}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}}},on_heartbeat_css=()=>{const _0x3d219c=a0_0x12c87f;let _0x13f079=document['querySelector']('#heartbeat');!_0x13f079&&(_0x13f079=document[_0x3d219c(0x199)](_0x3d219c(0x19c)),_0x13f079['setAttribute']('id',_0x3d219c(0x16c)),document[_0x3d219c(0x15c)][_0x3d219c(0x17b)](_0x13f079)),_0x13f079[_0x3d219c(0x18a)]=_0x3d219c(0x183);},off_heartbeat_css=()=>{const _0x1c2da1=a0_0x12c87f,_0x436c4b=document['querySelector'](_0x1c2da1(0x13e));_0x436c4b[_0x1c2da1(0x18a)]='';};function update_status(){const _0x17bb9b=a0_0x12c87f;document['querySelector'](_0x17bb9b(0x14d))[_0x17bb9b(0x19c)][_0x17bb9b(0x188)]=_0x17bb9b(0x195),document[_0x17bb9b(0x13f)](_0x17bb9b(0x14d))[_0x17bb9b(0x194)]=downloading_current+'\x20/\x20'+downloading_total;}function create_status_box(){const _0x4e3a4c=a0_0x12c87f;let _0x299d04=document[_0x4e3a4c(0x199)](_0x4e3a4c(0x190));return _0x299d04[_0x4e3a4c(0x16e)]=_0x4e3a4c(0x150),_0x299d04[_0x4e3a4c(0x18a)]=downloading_current+_0x4e3a4c(0x14f)+downloading_total,_0x299d04;}function a0_0x1199(_0x30b1ce,_0x300276){const _0xe8ef59=a0_0xe8ef();return a0_0x1199=function(_0x119944,_0x1e1c5c){_0x119944=_0x119944-0x13a;let _0x2a3a49=_0xe8ef59[_0x119944];return _0x2a3a49;},a0_0x1199(_0x30b1ce,_0x300276);}function create_download_icon(){const _0xf93011=a0_0x12c87f;let _0x2866f4=document[_0xf93011(0x199)]('div'),_0xce7a82=document[_0xf93011(0x199)](_0xf93011(0x184));_0xce7a82['className']=_0xf93011(0x175),_0xce7a82['setAttribute'](_0xf93011(0x13c),_0xf93011(0x157)),_0xce7a82[_0xf93011(0x19c)][_0xf93011(0x197)]=_0xf93011(0x145),_0xce7a82[_0xf93011(0x19c)][_0xf93011(0x146)]=_0xf93011(0x18f),_0x2866f4[_0xf93011(0x17b)](_0xce7a82);let _0x2c7d37=document[_0xf93011(0x199)](_0xf93011(0x15b));_0x2c7d37['rel']=_0xf93011(0x155),_0x2c7d37[_0xf93011(0x170)]=_0xf93011(0x143),document[_0xf93011(0x178)](_0xf93011(0x15c))[0x0][_0xf93011(0x17b)](_0x2c7d37);let _0x4e9fa7=document['createElement'](_0xf93011(0x190));_0x4e9fa7['className']='status',_0x4e9fa7['style'][_0xf93011(0x188)]=_0xf93011(0x17e),_0x4e9fa7['style'][_0xf93011(0x152)]=_0xf93011(0x17c),_0x4e9fa7['style'][_0xf93011(0x15f)]=_0xf93011(0x17c),_0x4e9fa7[_0xf93011(0x19c)][_0xf93011(0x17f)]=_0xf93011(0x177),_0x4e9fa7['style']['position']=_0xf93011(0x18e),_0x4e9fa7['style'][_0xf93011(0x142)]='10000',_0x4e9fa7[_0xf93011(0x19c)][_0xf93011(0x19d)]='0.5rem',_0x4e9fa7[_0xf93011(0x19c)]['left']=_0xf93011(0x15d),_0x4e9fa7['style'][_0xf93011(0x193)]=_0xf93011(0x174);let _0x4c0c2b=create_status_box();_0x4c0c2b[_0xf93011(0x19c)]['fontFamily']=_0xf93011(0x14e),_0x4c0c2b['style'][_0xf93011(0x144)]=_0xf93011(0x145),_0x4c0c2b[_0xf93011(0x19c)]['color']=_0xf93011(0x187),_0x4c0c2b[_0xf93011(0x19c)][_0xf93011(0x19e)]=_0xf93011(0x149),_0x4c0c2b[_0xf93011(0x19c)][_0xf93011(0x16f)]=_0xf93011(0x14c),_0x4c0c2b[_0xf93011(0x19c)][_0xf93011(0x189)]=_0xf93011(0x160),_0x4c0c2b[_0xf93011(0x19c)][_0xf93011(0x169)]=_0xf93011(0x18c),_0x4c0c2b[_0xf93011(0x19c)][_0xf93011(0x148)]=_0xf93011(0x13a),_0x4c0c2b[_0xf93011(0x19c)][_0xf93011(0x196)]='.25rem\x20.4rem\x20#2E8B87',_0x4c0c2b[_0xf93011(0x19c)][_0xf93011(0x188)]=_0xf93011(0x151),_0x4e9fa7[_0xf93011(0x17b)](_0x2866f4),_0x4e9fa7[_0xf93011(0x17b)](_0x4c0c2b);let _0x3bc26e=document[_0xf93011(0x13f)](_0xf93011(0x18b)),_0x12ebcc=_0x3bc26e[_0xf93011(0x14a)];return _0x3bc26e[_0xf93011(0x147)](_0x4e9fa7,_0x12ebcc),_0x4e9fa7;}const throttlePromises=async(_0x2aa5fc,_0x4e15fe)=>{const _0x4a7642=a0_0x12c87f;while(_0x2aa5fc[_0x4a7642(0x15a)]>0x0){await Promise['all'](_0x2aa5fc[_0x4a7642(0x16b)](0x0,_0x4e15fe)[_0x4a7642(0x171)](_0x35b4ca=>_0x35b4ca())),await sleep(0xc8);}},get_data_need=_0x3326dd=>{return new Promise((_0x49b58e,_0x39a860)=>{const _0x4f7437=a0_0x1199;var _0x4b6899=XMLHttpRequest[_0x4f7437(0x153)][_0x4f7437(0x140)];XMLHttpRequest['prototype'][_0x4f7437(0x140)]=function(_0x10c98d,_0x9bb06c,_0x1100b1,_0xd062cd,_0x4a8d51){const _0x30fb0c=_0x4f7437;return this['_url']=_0x9bb06c,_0x4b6899[_0x30fb0c(0x18d)](this,arguments);};var _0x1d5340=XMLHttpRequest[_0x4f7437(0x153)][_0x4f7437(0x198)];XMLHttpRequest[_0x4f7437(0x153)]['send']=function(_0x5ecabc){const _0x596942=_0x4f7437;return this['addEventListener'](_0x596942(0x176),function(){const _0x2dbf65=_0x596942;if(this[_0x2dbf65(0x15e)][_0x2dbf65(0x162)](_0x3326dd)){if(this[_0x2dbf65(0x15e)]['includes'](['a','p','i','/','w','e','b','-','v','i','e','w','e','r','/','g','e','n','e','r','a','t','e'][_0x2dbf65(0x13b)](''))){const _0x5c42db=JSON[_0x2dbf65(0x166)](this[_0x2dbf65(0x161)]);_0x49b58e(_0x5c42db[_0x2dbf65(0x191)][_0x2dbf65(0x172)]);}else{if(this[_0x2dbf65(0x15e)]['includes'](['b','o','o','k','-','a','p','i','.','r','i','d','i','b','o','o','k','s','.','c','o','m','/','b','o','o','k','s'][_0x2dbf65(0x13b)](''))){const _0xcf13d8=JSON[_0x2dbf65(0x166)](this[_0x2dbf65(0x161)]);_0x49b58e(_0xcf13d8[_0x2dbf65(0x168)][_0x2dbf65(0x180)]);}}_0x49b58e(this[_0x2dbf65(0x161)]);}}),_0x1d5340[_0x596942(0x18d)](this,arguments);};});};function a0_0xe8ef(){const _0x1426b7=['absolute','pointer','div','data','4823525dTWOTK','transform','innerHTML','block','boxShadow','width','send','createElement','trim','image/jpeg','style','top','webkitTextStroke','#F9FDFD','join','src','52494646','#heartbeat','querySelector','open','1187763tVknSy','zIndex','https://fonts.googleapis.com/css2?family=Acme&display=swap','fontSize','3rem','cursor','insertBefore','backgroundColor','1px\x20#C62428','firstChild','image/png','0.2rem\x20solid\x20#167975','.status-num','\x27Acme\x27,\x20sans-serif','\x20/\x20','status-num','none','justifyContent','prototype','5067246KdCjWw','stylesheet','30705399ePTMSH','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','browser','image/webp','length','link','head','50vw','_url','alignItems','1rem','responseText','includes','7vAHKKv','addEventListener','padStart','parse','1938150ibTavF','title','padding','1028ZMhijb','splice','heartbeat','downloadMode','className','border','href','map','pages','replace','translate(-50%)','tai-ve','load','1.5rem','getElementsByTagName','click','.webp','appendChild','center','9058576HUfUbG','flex','gap','main','arrayBuffer','6957chLVsK','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20','img','createObjectURL','toString','#FD7377','display','borderRadius','textContent','body','0\x202rem','apply'];a0_0xe8ef=function(){return _0x1426b7;};return a0_0xe8ef();}((async()=>{'use strict';const _0x5cdc34=a0_0x12c87f;const _0x1ca59a=await get_data_need(['b','o','o','k','-','a','p','i','.','r','i','d','i','b','o','o','k','s','.','c','o','m','/','b','o','o','k','s']['join'](''));folder_title=decodeURIComponent(_0x1ca59a)[_0x5cdc34(0x19a)]()[_0x5cdc34(0x173)]('.','');folder_title?folder_title=folder_title+'/':folder_title='';const _0x23fc07=await get_data_need(['a','p','i','/','w','e','b','-','v','i','e','w','e','r','/','g','e','n','e','r','a','t','e'][_0x5cdc34(0x13b)](''));if(_0x23fc07[_0x5cdc34(0x15a)]>0x0){downloading_total=_0x23fc07[_0x5cdc34(0x15a)];const _0x2d4403=create_download_icon();_0x2d4403[_0x5cdc34(0x164)](_0x5cdc34(0x179),async()=>{const _0x4c573c=_0x5cdc34;on_heartbeat_css(),downloading_current=0x0;const _0x1e2e9a=_0x23fc07[_0x4c573c(0x171)]((_0x268146,_0xb1d085)=>()=>download_not_encrypted(_0x268146['src'],_0xb1d085));await throttlePromises(_0x1e2e9a,0x2);});}})());